<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Us | CityCare</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="About.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<style>
    
    .leaflet-control-geocoder {
        z-index: 1001;
        margin-top: 10px !important;
    }

    .leaflet-control-geocoder-form input {
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        width: 250px;
    }
    #start-camera{
    background: #3498db;
    color: white;
    border: none;
    padding: 0 15px;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
}
</style>
<body>

    <nav class="navbar">
        <div class="logo">City<span>Care</span></div>
        <input type="checkbox" id="check">
        <label for="check" class="checkbtn">
            <i class="fas fa-bars"></i>
        </label>
        <ul class="nav-links">
            <li><a href="home.html">Home</a></li>
            <li><a href="map.html">Map</a></li>
            <li><a href="About.html">About</a></li>
            <li><a href="reports.html">Reports</a></li>
            <li><button class="report-btn">Report Issue</button></li>
        </ul>
    </nav>

    <header class="about-hero">
        <h1>Empowering Town</h1>
        <p>Your Voice, Your Neighborhood, Our Responsibility.</p>
    </header>

    <main class="about-container">
        <section class="mission">
            <div class="about-text">
                <h2>Our Mission</h2>
                <p>CityCare was founded in 2026 with a simple goal: to make civic engagement effortless. We believe that
                    a better city starts with a single report. Whether it's a flickering light in Deepak Nagar or a
                    pothole near SICES College, we provide the digital bridge to get it fixed.</p>
            </div>
            <div class="about-img">
                <img src="https://images.unsplash.com/photo-1573164713988-8665fc963095?auto=format&fit=crop&w=800&q=80"
                    alt="Collaboration">
            </div>
        </section>

        <section class="values">
            <div class="value-card">
                <i class="fas fa-eye"></i>
                <h3>Transparency</h3>
                <p>Track your report in real-time. No more wondering if your complaint was heard.</p>
            </div>
            <div class="value-card">
                <i class="fas fa-users"></i>
                <h3>Community</h3>
                <p>Built for the residents of Ambernath to take pride in their local surroundings.</p>
            </div>
            <div class="value-card">
                <i class="fas fa-bolt"></i>
                <h3>Efficiency</h3>
                <p>Direct routing to city departments ensures faster response times for critical issues.</p>
            </div>
        </section>

        <section class="contact-cta">
            <h2>Have a Question?</h2>
            <p>We are always looking for feedback to improve the platform.</p>
            <button href="contact.html" class="btn-secondary">Contact Support</button>
        </section>
    </main>

    <footer>
        <p>&copy; 2026 CityCare Platform. Empowering communities.</p>
    </footer>
    <div class="submit-container">
        <div class="form-card">
            <span class="close-form" id="closeForm">&times;</span>
            <h2><i class="fas fa-exclamation-circle"></i> Report a Local Issue</h2>
            <p>Help us improve your neighborhood by providing details below.</p>

            <form id="complaintForm">

                <!-- IMAGE -->
                <div class="upload-container">
                    <label for="file-upload" class="upload-box" id="dropzone">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Tap to upload or take a photo</span>
                        <input id="file-upload" type="file" name="image" accept="image/*">
                    </label>
                    <button type="button" id="start-camera" 
                        style="margin-top: 10px; width: 100%;">
                        <i class="fas fa-camera"></i> Use Live Camera
                    </button>

                    <video id="video" width="320" height="240" autoplay
                        style="display:none; border-radius: 8px; margin-top:10px;"></video>
                    <canvas id="canvas" style="display:none;"></canvas>
                    <button type="button" id="click-photo" style="display:none;" class="btn-primary">Capture
                        Photo</button>
                    <div id="preview-wrapper"
                        style="display:none; margin-top: 15px; border: 1px solid #eee; padding: 10px; border-radius: 8px; background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                        <img id="imagePreview" src="#" alt="Preview"
                            style="width: 100%; height: 120px; object-fit: cover; border-radius: 6px;">
                        <p id="file-info"
                            style="font-size: 0.8rem; color: #666; margin-top: 8px; text-align: center; word-break: break-all;">
                        </p>
                    </div>
                </div>

                <!-- TITLE -->
                <div class="input-group">
                    <label>Issue Title</label>
                    <input type="text" name="title" placeholder="e.g. Broken Pothole, Blinking Streetlight" required>
                </div>

                <!-- CATEGORY -->
                <div class="input-group">
                    <label>Category</label>
                    <select name="category" required>
                        <option value="">Select a Category</option>
                        <option value="Garbage Management">Garbage Management</option>
                        <option value="Streetlight / Electricity">Streetlight / Electricity</option>
                        <option value="Roads & Potholes">Roads & Potholes</option>
                        <option value="Water Leakage">Water Leakage</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <!-- LOCATION -->
                <div class="input-group">
                    <label>Location Details</label>
                    <div class="location-input">
                        <input type="text" id="location-text" name="location" placeholder="Detecting your location...">
                        <input type="hidden" name="latitude" placeholder="latitude" id="lat">
                        <input type="hidden" name="longitude" placeholder="longitude" id="lng">
                        <button type="button" class="gps-btn">
                            <i class="fas fa-crosshairs"></i>
                        </button>
                    </div>
                </div>

                <!-- DESCRIPTION -->
                <div class="input-group">
                    <label>Description</label>
                    <textarea name="description" rows="4" placeholder="Describe the problem in detail..."></textarea>
                </div>

                <button type="submit" class="submit-btn">Submit Report</button>
            </form>
        </div>
    </div>
    <div id="mapModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Search & Select Location</h3>
            <div id="map"></div>
            <button type="button" class="submit-btn" id="confirmLocation">Confirm Location</button>
        </div>
    </div>
    <script src="About.js"></script>
      <script>
        const cameraBtn = document.getElementById('start-camera');
const video = document.getElementById('video');
const canvas = document.getElementById('canvas');
const clickBtn = document.getElementById('click-photo');
const preview = document.getElementById('imagePreview');
const wrapper = document.getElementById('preview-wrapper');
let capturedBlob = null; // Store the captured file globally

cameraBtn.addEventListener('click', async function() {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ 
            video: { facingMode: "environment" }, // Prioritize rear camera on mobile
            audio: false 
        });
        video.srcObject = stream;
        video.style.display = "block";
        clickBtn.style.display = "block";
        cameraBtn.style.display = "none";
        wrapper.style.display = "none"; // Hide old preview while taking new photo
    } catch (err) {
        console.error("Camera Error:", err);
        alert("Camera access denied. Please ensure you are using HTTPS or localhost.");
    }
});

clickBtn.addEventListener('click', function() {
    // 1. Set canvas size to match the video stream exactly
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    
    // 2. Draw the frame to canvas
    const context = canvas.getContext('2d');
    context.drawImage(video, 0, 0, canvas.width, canvas.height);
    
    // 3. Convert to Blob (File format) for easier submission
    canvas.toBlob((blob) => {
        capturedBlob = new File([blob], "captured_image.jpg", { type: "image/jpeg" });
        
        // 4. Update Preview
        const reader = new FileReader();
        reader.onloadend = () => {
            preview.src = reader.result;
            wrapper.style.display = "block";
            document.getElementById('file-info').innerText = "Captured from Camera";
        };
        reader.readAsDataURL(capturedBlob);
    }, 'image/jpeg', 0.9);
    
    // 5. Cleanup: Stop camera stream
    const tracks = video.srcObject.getTracks();
    tracks.forEach(track => track.stop());
    video.style.display = "none";
    clickBtn.style.display = "none";
    cameraBtn.style.display = "block";
    cameraBtn.innerHTML = '<i class="fas fa-redo"></i> Retake Photo';
});
    </script>
</body>

</html>